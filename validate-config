# Exit in case of any errors on subshells
set -e

action=$(
  whiptail \
    --title "Warning" \
    --menu "Are you sure you want to install Arch with the configurations listed below? " \
    0 0 0 \
    "Keyboard layout " "$KEYMAP" \
    "Swap partition size " "$SWAP_SIZE" \
    "Encrypted partition name" "$ENCRYPTED_PARTITION_NAME" \
    "Encrypted partition password " "$ENCRYPTED_PARTITION_PASSWORD" \
    "Mirror country " "$MIRROR_COUNTRY" \
    "Timezone " "$TIMEZONE" \
    "Locale " "$LOCALE" \
    "Computer name " "$HOSTNAME" \
    "Root password " "$ROOT_PASSWORD" \
    "Non-root username " "$USER_NAME" \
    "Non-root password " "$USER_PASSWORD" \
    3>&1 1>&2 2>&3
)

if [ "$action" = "n" ]; then
  exit 1
fi
